"use strict";

var isGmod = false;
var isTest = false;
var totalFiles = 50;
var totalCalled = false;
var downloadingFileCalled = false;
var percentage = 0;
var serverIP = "Connection...";
var playerSteamID = "Loading...";

function GameDetails(servername, serverurl, mapname, maxplayers, steamid, gamemode) {
    debug("GameDetails called");
    isGmod = true;
    
    if (serverurl) {
        try {
            const url = new URL(serverurl.startsWith('http') ? serverurl : `http://${serverurl}`);
            serverIP = url.hostname;
            if (url.port) {
                serverIP += `:${url.port}`;
            } else {
                serverIP += ":27015"; 
            }
            $("#server-ip").text(serverIP);
        } catch (e) {
            debug("Error parsing server URL: " + e);
            serverIP = serverurl;
            $("#server-ip").text(serverurl);
        }
    }
    
    if (steamid) {
        playerSteamID = steamid;
        $("#steamid").text(steamid);
    }
    
    if (!isTest) {
        loadAll();
    }

    if (Config.title) {
        $("#title").html(Config.title);
    } else {
        $("#title").html(servername);
    }
    $("#title").fadeIn();

    if (Config.enableMap) {
        $("#map").append(mapname);
        $("#map").fadeIn();
    } else {
        $("#map").hide();
    }
}

function SetFilesTotal(total) {
    debug("SetFilesTotal called total: " + total);
    totalCalled = true;
    totalFiles = total;
}

function SetFilesNeeded(needed) {
    debug("SetFilesNeeded called needed: " + needed);
    if (totalCalled) {
        var sPercentage = 100 - Math.round((needed / totalFiles) * 100);
        percentage = sPercentage;
        updateLoadingProgress(sPercentage);
    }
}

function DownloadingFile(filename) {
    filename = filename.replace("'", "").replace("?", "");
    debug("DownloadingFile called '" + filename + "'");
    downloadingFileCalled = true;
    
    $("#loading-file").text(filename);
    
    if (totalCalled) {
        $("#loading-percent").text(percentage + "%");
    }
}

var allow_increment = true;
function SetStatusChanged(status) {
    debug("SetStatusChanged called '" + status + "'");
    
    $("#loading-file").text(status);
    
    if (status === "Workshop Complete") {
        allow_increment = false;
        updateLoadingProgress(80);
    } else if (status === "Client info sent!") {
        allow_increment = false;
        updateLoadingProgress(95);
    } else if (status === "Starting Lua...") {
        updateLoadingProgress(100);
        setTimeout(function() {
            $(".loading-container").fadeOut();
        }, 1000);
    } else {
        if (allow_increment) {
            percentage = percentage + 0.1;
            updateLoadingProgress(percentage);
        }
    }
}


function updateLoadingProgress(percent) {
    percent = Math.min(100, Math.max(0, percent));
    debug("Loading progress: " + percent + "%");
    
    $("#loading-progress").css("width", percent + "%");
    $("#loading-percent").text(Math.round(percent) + "%");
    
    if (serverIP) {
        $("#server-ip").text(serverIP);
    }
    
    if (playerSteamID) {
        $("#steamid").text(playerSteamID);
    }
}


function loadAll() {
    setTimeout(function() {
        debug("Checking if first time loading.. " + downloadingFileCalled);
        if (!downloadingFileCalled) {
            $("#loading-file").text("Это ваш первый вход на сервер! Загрузка файлов...");
        }
    }, 10000);
}

function loadBackground() {
    if (Config.backgroundImage) {
        $(".pluvbg-overlay").css(
            "background-image",
            'url("images/' + Config.backgroundImage + '")'
        );
    }
}

function announce(message, ispermanent) {
    if (Config.enableAnnouncements) {
        console.log("ANNOUNCEMENT: " + message);
    }
}

function debug(message) {
    if (Config.enableDebug) {
        console.log(message);
    }
}


$(document).ready(function() {
    updateLoadingProgress(0);
    $("#loading-file").text("Initilization...");
    $("#server-ip").text(serverIP);
    $("#steamid").text(playerSteamID);
    
    setTimeout(function() {
        if (!isGmod) {
            debug("TEST NO GMOD BLYAT");
            isTest = true;
            loadAll();

            GameDetails(
                "TEST SERV",
                "127.0.0.1:27015",
                "gm_construct",
                "16",
                "STEAM_0:1:12345678",
                "Sandbox"
            );

            var totalTestFiles = 100;
            SetFilesTotal(totalTestFiles);

            var needed = totalTestFiles;
            var testInterval = setInterval(function() {
                if (needed > 0) {
                    needed = needed - 1;
                    SetFilesNeeded(needed);
                    DownloadingFile("test_file_" + needed + ".dat");
                } else {
                    clearInterval(testInterval);
                    SetStatusChanged("Starting Lua...");
                }
            }, 100);
        }
    }, 1000);
});

/**
  MC МАЛОЙ ПОЛЕЗ СЮДА И ПОЖАЛЕЛ...                                                                                                                                                                                                             
                                                                                                                                                                                                               
                                                                                                                                                                                                               
                                                                                                                                                                                                               
                                                                     ░▒▓▒░                                                                                                                                     
                                                                    ▒░   ▒▒                                                                                                                                    
                                                                  ░▓░     ▓█▒                                                                                                                                  
                                                                 ▒▒         ▓█▒                                                                                                                                
                                               ▒▒▓▒             ▒▒    ███     ▓█▓                                                                                                                              
                                              ▒    ▓▒          ▒▒    ██████▒    ░▓▒                                                                                                                            
                                            ░▓      ▒█▒       ▒░    █████████▓                                                                                                                                 
                                           ░▒   ██    ▒▓▓          ███▒▒▓██████████████████████████████                                                                                                        
                                          ▒░   ████▒              ████████▓▒▒▒▒███▓▓▓▓▓▒█▓▓███▓▓▓▓▓▓███████                                                                                                    
                                         ░    ████████      ████████▒░░▒▒▓▓▓▓▓▓▓▒▒▓▓▓▓▓▒██▓███████████▓▓▓██                                                                                                    
                                             ███▓▓█████████████████▓▓▓▓▓▒▒▒▒▒▒▓████▒▓▓▓▒██▓██████████████████████                                                                                              
                                            ███████▓▒▒▒▒▒▓▓▓▓▓▓▒▒▒▓█████████████████▒▓▓▓▒█▒▓█████████████▓▓█▓▒▓████                                                                                            
                                        ██████▒▒▒▒▒▓▓▓▓▓▒▓▓█████████▒     ████████▓█▒▓▓▓▒██▓██████████████▓██▓██▓██                                                                                            
                                      ███████▓▓▒▒▓██████████▓         ░▒░   ██████▓█▓▓▓▓▒██▒██████████████▓██▒▓████                                                                                            
                                     ██▓▓▓▓█████████▒         ▒▒▒▒▒▒▒▒▒▒▒▒▒  █████▓██▒▓▓▓▒█▒▓█████████████▓▓█▒▓█▓██                                                                                            
                                     █▓▓▓██▓          ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒   ████▓█▒▓▓▓▒██▓█████████████▓▒█▒▓█▓██                                                                                            
                                     █▒▓▓█   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░  ███▓█▒▓▓▓▒██▒▓████████████▓▒██▓██▓█                                                                                            
                                     █▒▓▓▓█ ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░ ▒██▓██▒▓▓▓▒█▒▓█████████████▒██▒██▒█                                                                                            
                                     ██▓▓▓█ ░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒  ██▓██▒▓▓▓▒██▓█████████████▒██▒██▒█▓                                                                                           
                                     ██▓▓▓█  ▒▒▒▒▒▒▒▒▒▓▓█████▓▒▒▒▒▒▓▓▓▓█████████  █▓██░▓▓▓▒▓█▒▓████████████▓▓█▒▓█▒██                                                                                           
                                      █▒▓▓██ ▒▒▒▒▒▒███████▓  ▓▒▒▒▒███████      ███████▓▓▓▓▓▒█▓▓████████████▓▒█▒▓█▒██                                                                                           
                                      █▒▓▓▓█  ▒▒▒▒▒▓       ▓██▒▒▒▒█      ░███████   ███▒▓▓▓▒██▒████████████▓▒█▓▓█▓██                                                                                           
                           ▒▓█▓▓░     ██▓▓▓██ ▒▒▒██████████████▓▒▒████▓           █████░▓▓▓▒▓█▒▓████████████▒██▓█▓██                                                                                           
                     ▓█████░          ██▓▓▓▓█  ▒▒█            ██▒▒▓█                 ██▒▓▓▓▓░█▓▓████████████▒██▒█▓██                                                                                           
                          ▒      ░     █▓▓▓▒█▓ ▒▒█▓            █▓▒▓██             ██████▒▓▓▓▒██▒████████████▒██▒▓▓██                                                                                           
                                       ██▓▓▓▓█ ░▒██            ██▒▒██             ███▓██▒▓▓▓▒██▒▓███████████▓▓█▒▓▓██                                                                                           
                    ▒▒          ▒      ██▓▓▓▓█░ ▒▓███          ██▒▒▓██          ██████▓█▒▓▓▓▓░█▓▓███████████▓▒█▒▓███                                                                                           
                     ▒████   ▒▓▓        ██▓▓▓██ ░▒▒▓██         █▓▒▒▒▓████   ▓█████  ██▓██▒▓▓▓░██▓███████████▓▒████                                                                                             
                     ▒   ▓███▒          ██▓▓▓▓█▓ ▒▒▓█████░   ███▒▒▒▒▒▓████████       ██▓█▒▓▓▓▒██▒▓██████████████                                                                                               
                   ▒▓▒     ▒             ██▓▓▓██  ▒▒░  █  ▒███████████████  ██  ███████▓█▓▒▓▓▓▒█▓▓███████▓▓███                                                                                                 
                 ░▒        ▒             ██▓▓▓▓██ ▒▓█   ██ ▓▓░ ██░         ██░ ████████▓██▒▓▓▓▒██▓█████▓▓███                                                                                                   
                                          ██▓▓▓▓█  ▒████████▓█    █  ██  ███  ██████████▓█▒▓▓▓▒██▒▓██▓▓███░                                                                                                    
                 ░        ░                █▓▓▓▓██ ░▒▒▒▒▒▒▒▒▒███ █████ ███   ███▓▓▓▓▒▒▓▓▓██▓▓▓▓▒█▓▓▓▓███▓                                                                                                      
                  ▒▓█▓▓▓█▓░                ██▓▓▓▓█  ▒▒▒▒▒▒▒▒▒▒▒██     █▒   ████████████████▓▓▓▓▒██▒████                                                                                                        
                                            ██▓▓▓▓█  ▒▒▒░        ███████████████▓▒▒░   ░░▒▓▓▓▓██████▓                                                                                                          
                                             ██▓▓▓██     ░█████████████▒░░░░░▒▒▒▒▒▒▓▓██▓▓▒▓▓████ █                                                                                                             
                                             ███▓▓▓█████████▓▒░░▒▒▒▓▓▒▒▒▒▒▒▓███████████████▓█                                                                                                                  
                                              ██▓▓▓▓▓▓▓▓▓▓▓██████████████████ █▒            █                                                                                                                  
                                               █████████████████         █▓ █ ██          ███                                                                                                                  
                                                ██ ██                    ████ ██ ██████████░███                       ███████▓   ██████████████                                                                
                                                                      █████ █████▒    █   ▒▒ ░████████████            ██        ██       ██▒  ░██                                                              
                                                            ███████████ █       █▓ ██▓▒▒▒░   ████▒      ▒████            ███████▒ █  ▓ ██   █████                                                              
                                                        █████████████  ██       ███░  ░▒██████  ░▒▓▓▓▓▓▓▓▒░░███               ░█ ▓     █  ▒█     █████                                                         
                                                       ███▒ ░▒▒▒  ████ ░███  ████   ▒███▒░  ██ ▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒██   ▓███████████▓ █  ▓ ██  █▓ ▒▒▒  ████████                                                     
                                                     ▒██▓▓░▓▓▓▒ ██░  ▒█░ ▒████  ░████▒░▒▓▓░▒█ ░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▓██     ███▓    █  █  ▓ ██  █  ▒▒▒ █▓▓▓▓▓▓██████                                                 
                                                     ██ █░▒▓▒  ██░▒▓▓▓▓▒▒   ▓████▒░░▒▓▓▓▓▒ ██ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒██          █ ██ █  ▒ ██  ██     █▒▓▓█▓▓▓▓▓▓█████                                              
                                                     ███▓▒▓░░███▓░▓▓▓▓▓▒█▓██▒   ▒▒▓▓▓▓▓▓▓ ▓█ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒██            █▒      █   ▓█████████▓▒▓▓▓▓▓▓▓▓▓████                                           
                                                     █ █▒▒▒░██▒ ▒▒▓▓▓▓▓▒▓█  ▒▓▓▓▓▓▓▓▓▓▓▓▒ ██ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒██           ████▓█████████    ████████▒▒▓▓▓▓▓▓▓████                                        
                                                    ██▒   ░██ ░▒▓▓▓▓▓▓▓▓▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▒ ██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒██              ░                   █████▒▒▓▓▓▓▓▓████                                      
                                                    █  ░███▓░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ ▓█▒░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░██                                     ████▒▓▓▓▓▓▓▓███                                    
                                                    ████░ ▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░ ██ ▒▓▓▓▓▓▓▒  ▓█▓▓▓▓▓▓▓▓▓▓▓▓▓▒ ██                                       ████▒▓▓▓▓▓▓███                                  
                                                 ████  ░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒ ██ ▒▓▓▓▓▓▒  ██▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░▒██                                       ████▒▓▓▓▓▓▓███                                
                                              ████  ░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░ ██ ▒▓▓▓▓▓▓░██▓░▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░██                                         ███▒▓▓▓▓▓▓███                              
                                           █████ ░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒  ██ ░▓▓▓▓▓▓▓░██ ░██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒ ██▓                                         ███▒▓▓▓▓▓▓███                            
                                         ██ ████ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░  ▒██░█▓▒▓▓▓▓▓▓ ██ ▒▒██░ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒ ░██                                          ███▓▓▓▓▓▓▓██                           
                                       ██▓ █████▓ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒  ▓█████  █░▒▓▓▓▓▓▒ █░▒▒  ██▒▒▓▓▓▓▓▓▓▓▓▓▒░  ░▓▒██                                          ███▓▓▓▓█▓▓███                         
                                       ████    ██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒  ███████   ██ ▒▓▓▓▓▓ █▓▒▒▓█▒ █▒ ▒▓▓▓▓▓▓▒░ █████▓▒███                                          ██▓▓▓▓▓▓▓███                        
                                       ████    ███ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▓▓▓▓▓▓▒ ▓███    ████▓█▓░▓▓▓▓▓ █▓░▒░█ ████  ▒▓▓▓▒ ███  ░▒▒▒  ▒███                                        ███▒▓█▓▓▓▓██                       
                                       ████████████ ░▒▒▒▓▓▓▓▓▓▓▓▓▒█▒▒▓▓▓▒▒█████    ████████ ▓▓▓▓▓ █▒▒ ██    ███░ ░ ▒██ ░▒▓▓▓▓▓▓▓▓▒▒█████                                      ██▓▓▓▓█▓▓███                     
                                       █▓ █████   ██ ▓▓           █░ ░▒▒▒██  ████  ██████ █▓▒▓▓▓▒░█  ██       ███▒▓█▒ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████                                     ██▒▓█▓▓▓▓███                    
                                        █▒█████████████████████████████▒▒▓   ██████  ████  █ ▓▓▒░█  ██▒          ██▒░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒███                                    ██▓▓▓█▓▓▓▓██                   
                                         █▒                        ██ ▒████████████     ████ ▓▒░█░ ██           ▒█ ░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░██                                    ██▓▓▓█▓▓▓▓██                  
                                          ██░ ▒▓▓▓▓▓▓▓▓▒░░██▒▓▓▓▓▓▒ ██            ██████████  ▓█▒ ██           ██▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░█                                     ██▓▓▓█▓▓▓▓██                 
                                           ████▒░  ░░  ░██▒▒▓▓▓▓▓▓▓▒ ▓██  ░▒▓▓▓▓▓▒▒░      ▒████  ▓█           ██░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░██                                      ██▒▓▓█▓▓▓▓██                
                                             ██████▒▓███░░▒▓▓▓▓▓▓▓▓▓▒░ ███▓    ▒▒▓▓▓▓▒▒   ▒█▒  ███           ██░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒ ▒██                                        ██▓▓▓█▓▓▓▓██               
                                                ▒████▓ ░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▒░ ▓█████▓     ▒████▒▒██▓▓█          ███ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░  ▓████                                          ██▓▓▓█▓▓▓██▒              
                                               ██  █▒ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░   ▓████████▓   ██░▒████████▓▒████▒░▒▓▓▓▓▓▓▓▓▓▓▓▒    ▒███████▒                                              █▓▓▓▓█▓▓▓██              
                                              ▒███▒██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒       ░  ▒██ ▒▒░     ▒███▓░ ░▒▓▓▓▓▓▓▓▓▒▒▒▓████████░                                                    ██▓▓▓▓█▓▓▒██             
                                           ████▒ ░▒ ██░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░░██░ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▓███████                                                             ██▓▓█▓▓▓▓▒█             
                                         ███░  ▓██▓ ██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▓█▒ ░▒▒▒▓▓▓▓▓▓▒▓▓▓▓▓▓▓▓▓▓▓▓▒██▒██                                                                 ██▒▓▓▓█▓▓▒██            
                                        ██▒▒ ██▓▒▒▒▒ ██ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒██  ▒▓▓██▒▓▓░█▒▓▓▓▓▓▓▓▓▓▓▓░██                                                                      ██▓▓█▓▓▓▓▒█            
                                       ██ ▒███  ▓▓▒▒  █▒░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒ ██░   █░ ▓▒ █▒▒▓▓▓▓▒▓▒▓▒ ▒██                                                                      ██▒▓▓██▓▓▒██           
                                        ███▒ ██ ▒▓▒██ ▓█ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒ ▓███░██ ▓▒▒█▒▒▓▓▓▒▓█   ███                                                                        █▒▓▓▓▓██▓██           
                                        █▒ ▒▒ ██ ▒▒ █▒ ██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░  ▓▓██  ░ █  ▒▒  █████▒                                                                          ██▓▓█▓▓▓▓▒█           
                                        █▓ ░▒░ ██ ▓ ██  ██ ▒▓▓▓▓▓▓▓▓▓▓▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ ██ ███▓▓███▒▒▓███   ░                                                                           ██▒▓▓█▓▓▓▒█▒          
                                     ███▒██▓ ░ ██   ████▒██░▒▓▓▓▓▓▓▓▓▓▓█▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓ █▒██  █▒░▒████▒ ▒█████                                                                          ██▒▓▓█▓█▓▒██          
                                    ██  ░ ▒██▒  ██ ██     ██▓▓▓▓▓▓▓▓▓▓▒▓█▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓ ███ ██▒▒▒▒░░░▒▒▓▓▒  ▒███                                                                        ██░▓█▓▓█▓▒██          
                                    ██ ▒▓▒░  █  ████░ ▒░ ██ ▓▒▓▓▓▓▓▓▓▓▓▒▒█▓▓▓▓▓▓▓▓▓▓▓▓▓▓░ ███  ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▒  ▒███                                                                     ██░▓▓▓█▓▓▒██          
                                     ██░  ▒░░████████   ██ ███▒▓▓▓▓▓▓▓▓▓▒▒█▓▓▓▓▓▓▓▓▓▓▓▓▒ ██ ░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░ ▒███▓                                                                  ▒█▒▓█▓▓▓█▓██          
                                      ▒███████▒    ██████    █▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒░ ███▓                                                                ▒█▒▓▓█▓█▓▒██          
                                                     ██     ██▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒ █▓░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▓██                                                               ▓█░▓▓█▓▓█▒██          
                                                      ██   █▓▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ ██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒███                                                             ██░▓█▓▓█▓▒██          
                                                       ██ █▓▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░█ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒██▒                                                           ██▒▓▓▓█▓▓▒██          
                                                         ██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░ ██ ▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒███                                                          ██▒█▓█▓▓▓▒█▒          
                                                        ████  ░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒   ██  ░▓█▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██                                                         █▓▓▓▓█▓█▓▓█           
                                                       ██ ████▒                   ████▒ ▒██▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒███                                                      ██▒▓▓█▓▓█▓██           
                                                      ▒█▒░░ ▒█████████████████████████ ██▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▓██                                                     ██▓▓▓█▓█▓▒█            
                                                     ██▓▒▓▓▒░  ████████▒███▓█████████░██ ░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒██                                                   ██▒▓▓█▓▓▓▓██            
                                                    ██░▒▓▓▓▓▓▒░ ▒██████      ██████████ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░██                                                  ██▓▓▓█▓█▓▓█░            
                                                  ███▒▓▓▓▓▓▓▓▓▓▒  ███████  ▓▒██     ██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░██                                                ██▒▓▓█▓▓▓▓██             
                                                 ██▓▒▓▓▓▓▓▓▓▓▓▓▓▓▒  ███  ███████   ██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░██                                              ██▒▓▓▓█▓▓▓██              
                                                ██▓▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒  ███▓██████████ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒█                                             ██▓▓▓▓█▓▓▓▓██              
                                               ██▓▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░ ░████    █▒ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒██                                           ██▓▓▓▓█▓▓▓▓██               
                                              ▓█▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░  ▓█████ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒█                                          ███▓▓▓█▓▓█▓██                
                                              ██▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░  █░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒██                                        ███▒▓▓█▓▓▓▓██                 
                                             ██▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ ██ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒█                                       ██▒▓▓▓█▓▓█▓▓██                 
                                            ██▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ ██░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░█                                      ██▒▓▓▓█▓▓▓▓▒██                  
                                            █▓▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░█ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒██                                   ███▒▓▓▓█▓▓▓▓▒██                   
                                           ██▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░██ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒██                                  ██▓▓▓▓▓█▓▓▓▓▓██                    
                                          ██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ ██░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒██                                ███▒▓▓▓█▓▓▓▓▒███                     
                                          ██▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ █▓▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒██                             ████▓▓▓▓█▓▓█▓▓▒██                       
                                         ██ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ █▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒██                           ████▓▓▓▓█▓▓█▓▓▓███                        
                                         ██░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ █░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒██                       ▓████▓▓▓▓█▓▓█▓▓▓▓███                          
                                        ██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ █▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ █                    ██████▒▓▓▓▓█▓▓█▓▓▓▓███▓                           
                                        ██ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ █▓▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒ █             ████████▓▒▒▓▓▓▓█▓▓█▓▓▓▓▓████                             
                                        █▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ █▓▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░▓████████████████▓▒░▒▓▓▓▓█▓█▓▓▓█▓▓▓▓▓████                               
                                       ██ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ ██░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒██▓▓▓▒▒▒▒▒▒▒▒▓▓▓▓▓▓█▓▓▓█▓▓█▓██▓▓▓▓▓███▒                                 
                                       ██ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ ██░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░ █▓▓▓▓▓▓▓▓▓▓▓█▓▓█▓▓█▓▓█▓▓█▓▓▓▓▓▓▓████                                    
                                      ██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ ██░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒█▓▓▓▓█▓█▓█▓█▓▓█▓▓█▓▓█▓▓█▓▓▓▓▒▒████                                       
                                      ██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░██░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░██▓▓█▓▓█▓▓█▓▓█▓▓█▓▓█▓▓▓▓▒▒░█████                                          
                                      ██ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒██ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████▒▒▒▒▒▒▓▓▓▓▓▓▒▒▒▒░░░▒▓██████                                             
                                     ███ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▓█ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██  ████████████████████████                                                 
                                     ███░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▓█ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██                                                                            
                                     ██▓▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒█ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▓██                                                                             
                                     ██ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░█ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒███                                                                              
                                    ▒██░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ █ ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒██                                                                                
                                    ▓██░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ █▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒██                                                                                 
                                    ▒██▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒ ██░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒███                                                                                 
                                    ▒██▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒████ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░███                                                                                   
                                     █▓▓▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▓██  █ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒███                                                                                     
                                     █▓▓▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░███   █░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░▒███                                                                                      
                                     ██▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░░███    ██▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓███                                                                                        
                                      █ ▒▓▓▓▓▓████████████████████████████       █ ▒░       ░░░░░▒▒▒▓████████████████                                                                                          
                                     ▓████████████████▓█▓▓▒▒  ░ ▒▒▒░ ██    ██████████████████████████████▓▓███▓  ██                                                                                            
                                                                                 ▒                                                                                                                             
                                                                                                                                                                                                               
                                                                                                                                                                                                               
                                                                                                                                                      
 */